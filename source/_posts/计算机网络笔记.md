---
title: 计算机网络笔记
date: 2022-04-04 09:30:53
tags:
	- 笔记
	- 计算机网络
categories: 计算机
password: 31278792
---
## 概述
**计算机网络就是探讨一个数据如何从源头传递到目的地展开，其中就涉及到封装、调制、编码等操作。**
### 起源
APRA成立(后来改名DARPA，即国防部高级研究计划署)，原本服务与军方的组织，已经推广到社会，1969年，APRANET诞生了，这是Internet的前身，它包括四个主要的节点：斯坦福研究院、加州大学圣巴巴拉分校、加州大学洛杉矶分校、犹他大学。其主要技术采用了包交换，也就是分组交换技术，它让APRANET拥有一个非常重要的特点——抗毁性（传输节点失效后，独立寻径的那些分组、包可以找到其他路径到达对方）。执行分组交换的设备叫作IMP(接口报文处理器)。随后互联网之父的Vinton.Cerf、Bob Kahn、Bob Braden等人一起发明了被称为互联网骨干协议的TCP/IP。1981年，美国国家科学基金(NSF)成立计算机科学网络(CSnet)，进行了两网互连，互联网因此正式诞生。现在互联网技术主要特点：TCP/IP协议簇形成和应用。
### 浏览器的诞生
计算机从原先的庞然大物转变成微型计算机面向普罗大众，从原本的DOS命令界面转变成图形化操作界面，在1989年仲夏之夜，Tim成功开发出世界上第一个Web服务器和第一个Web客户机。他将他的发明命名为World Wide Web(即www)。同时他还创立了W3C机构，浏览器的诞生离不开Tim的功绩。随后1993年4月，美国伊利诺州的伊利诺大学的NCSA发布Mosaic浏览器，第一款浏览器也就诞生了。
### 中国互联网发展历史
1987年9月20日从北京向德国卡鲁厄尔大学发送了第一封邮件标志着我们使用Internet的起点，里面的内容是"Across the Great Wall we can reach every corner in the world"(越过长城，走向世界)。
1994年4月20日，中国克服重重障碍，实现了与Internet的全功能连接，实现与互联网完全对接。
### 基本的概念
广义上网络包括交通网络、自来水网络、排水网络、邮政网络、快递网络、电话网络等，计算机网络也是其中之一。计算机网络是使用单一技术相互连接的自主计算机的互联集合。
#### 拓扑
拓扑指的是信道的分布方式。常见的拓扑结构：总线型、星型、环型、树型和网状拓扑。最常见的两种基础拓扑是**总线拓扑**和**星型拓扑**  
**总线拓扑：**主机挂接在总线上，相互直接通达。  
**星型拓扑：**主机都挂接在一个中心节点上。
#### 协议
协议指的是一系列规则和约定的规范性描述，它控制网络中的设备之间如何进行信息交换。
#### 数字带宽
数字带宽指在单位时间内流经的信息总量，一般情况下带宽越大越好，越大意味着里面的信息越多。数字带宽的基本单位的bps(比特每秒)，bps单位太小，常用Kbps、Mbps、Gbps(每大一级都是10的3次方倍数关系)
#### 吞吐量
数字带宽通常指的是理想的带宽，而吞吐量指实际的、可测的带宽，是作为用户感觉好还是不好，非常重要的指标。吞吐量受很多因素影响：网络设备的性能、传输的数据类型、网络拓扑、用户数量、用户计算机、服务器等等。  
计算传输时间：  
理想公式:T=S/BW(传输时间等于信息总量除以数字带宽)  
实际公式:T=S/B(传输时间等于信息总量除以吞吐量) 
#### 点到点、端到端
**点到点：**信源机和信宿机之间的通信由一段一段的直接相连的机器间的通信组成，机器间的直接连接叫做点到点连接。  
**端到端：**信源机和信宿机之间直接通信，好象拥有一条直接的线路。
#### 计算机网络的分类
按传输介质分：有线网络和无线网络  
按网络大小规模分：PAN(个域网)、LAN(局域网)、MAN(城域网)、WAN(广域网)、Internet(互联网)
### 参考模型
计算机网络采用分层思想，对网络进行分割，各层工作独立，层之间通过接口联系，降低协议工作的复杂程度，灵活性好，任何一层的改变不影响其它层，每层的实现技术可以不同，减少了实现的复杂度，易于维护，每层可以单独进行调试，便于标准化。  
**分层原则：**信宿机第n层收到的对象应与信源机第n层发出的对象完全一致。  
**典型分层模型：**ISO的OSI七层模型与TCP/IP的四层模型DoD  
OSI参考模型由上至下分为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层（每一层都利用它下层的服务来为上层提供服务，第1层和第7层除外）  
TCP/IP参考模型由下至上依次为网络接入层、网络层、传输层、应用层
### 数据如何传输？
数据传输涉及三个主角：发送方、接收方和中间的信号通道。  
**发送方**发送数据时首先要进行封装或者打包的动作，将信息封装从最高层应用层开始逐渐下行到最底层物理层，在每一层上，数据都被加上头部信息，用于传递信息（数据在各层处理的对象叫作协议数据单元PDU，在各层都有特定的名称，在应用层叫数据流，在传输层叫数据段，在物理层叫分组，在数据链路层叫帧，在物理层叫比特流）。  
**接收方**接收数据要进行解封装或者解包操作，就是将收到的比特流从最低层物理层逐渐上行到最高层应用层提取出原始信息，是封装的逆向过程，在每层去掉头部信息最终还原出应用层输出信息。  
**中间的信号通道**指的是物理层与物理层直接比特流的传输，这可能会经历到不同的传输介质，如光纤、卫星、无线等等，涉及设备有可能是交换机、路由器和其他一下设备。  
每一层都有一个实体，可能是硬件也可能是是软件，来完成封装、解封装等基本功能。收发双方对应层上的实体互称为对等实体，发放和收方对应层之间仿佛有“直接”的通道虚拟通道，也叫对等通道。参考模型的每一层都为上层提供服务，以接口的形式供上层调用，协议作用于层与层之间，而层与层之间有一个接口，用于服务调用，而服务就是这一层功能的实现。

## 物理层
### 数据通信的理论基础
物理层主要功能是提供透明的比特流传输。物理层的特性：机械特性、电压特性、功能特性、规程特性。物理层上数据的传输是以信号进行的，信号指的是数据的电气或电磁表现。信号分模拟信号或数字信号两类。  
**模拟信号：对应时域的信号取值是连续的**  
**数字信号：对应时域的信号取值是离散的**  
信号在信道或者传输介质上传输，传输过程可以看出由很多不同频率分量的传输，高频分量的不等量衰减，接收方收到的信号是衰减和变形(失真)的。这里引出物理带宽概念，指的是传输过程中振幅不会明显衰减的频率范围。物理带宽是一种物理特性，通常取决于介质材料的构成、厚度、长度等。在工程中大部分或者说所有信道都是噪声信道，而不是无噪声信道，这里就涉及一个公式香农定理计算数字带宽：
>在噪声信道中，如果物理带宽为`B`Hz,信噪比为S/N，那么最大传输速率=Blog2(1+S/N)(bps)  
>分贝值=10log10(S/N)(db)  

香农定理说明了在信道一定的时候，物理带宽确定要想提高最大数据传输率（也就是数字带宽），只有增加信噪比。

### 有导向的传输介质
物理层传输介质可以根据是否有形分为引导性和非引导性两大类，通俗将就是有线传输介质和无线传输介质。有线性介质一般包括铜线、光纤，无线性介质一般包括卫星、无线电。  
铜轴电缆分为基带同轴电缆和宽带同轴电缆。  
双绞线是由两根具有绝缘层的铜导线按一定密度，逆时针方向绞合而成，目的是消除近端串扰，一般来说，绞距(扭距)越小，越均匀，则抵消效果越好，传输性能越好。双绞线分为非屏蔽双绞线(UTP)和屏蔽双绞线(STP)两种，还有一种网屏式双绞线是二者的折中。  
利用电力线除了送电还可以送数据。  
光纤利用光的全反射原理传输信号，重量轻、损耗低、不受电磁辐射干扰、传输频带宽、通信容量大。光纤分为单模光纤和多模光纤。  

### 复用技术
**复用技术是让多个用户共享同一根信道，复用技术是用在干线上的技术，它要解决干线起点如何共用，干线终点如何分离的问题。** 
 
- **频分多路复用FDM：**在干线起点，信道的频谱被分成若干段（子带），每个用户占据一段来传输自己的信号；到了干线的终点，每个子带的信号被单独分离出来给各个用户。相邻用户使用的频段（子带）之间，通常留有一定的带宽，以免混淆，这个频段被称作保护带。  
- **正交频分多路复用OFDM：**OFDM更好地利用带宽，没有了保护带，且子带之间相互重叠；同样的干线可以承载更多的用户。OFDM 已被广泛用于802.11、有线电视网络等等。  
- **波分多路复用WDM：**本质跟FDM一样，在光纤上复用信号。按照不同的波长，干线分成了若干份，承载了不同用户的光信号，到了终点，分离器分离出不同波长的光信号。当相邻波长间隔非常接近，子信道的数目非常大，WDM变成了DWDM（Dense，密集波分多路复用）  
- **时分多路复用TDM：**在时间上共享信道：将时间划分为非常短的时间片，每个用户周期性地在自己的时间片内使用整个带宽，广泛用于电话系统和蜂窝系统系统。TDM要求时间上必须同步，为了适应时钟的微小变化，可能要求增加<font color="red">保护时间间隔</font>。如果各用户需要的带宽不均衡，有的需要多，有的需要很少，而TDM用户时间片的使用却是一样的，将造
成信道的浪费，不高效。  
- **统计时分多路复用STDM：**提高信道的利用率，动态分配信道，不使用信道的用户不分配，分给有需要的用户使用，利用率可提高2~4倍（按需分配），实现技术较复杂，通常只在高速远程通信中使用，如ATM机，用户平均使用信道的情况不适用。  
- **码分多路复用技术CDMA：**它是一种扩展频谱技术，允许每个站利用整个频段发送信号，而且没有任何时间限制。打个比喻：许多人在两两交谈，TDM可以看成是许多人在大厅里**按照顺序**交谈；FDM可以看成是不同的人**按照不同的语调同时**进行交谈。而CDMA可以看成是每对交谈者使用不同的语言，有讲中文的、英文的、法语的，讲中文的只听见中文，其它语言对他来说就是噪声。所以，CDMA的关键在于：能够提取出需要的信号，同时拒绝所有其它的信号，并把这些信号当作噪声。在CDMA中，每个比特时间被细分成m个更短的时间间隔，这更短的时间间隔被称为码片；通常地，每个比特被分为64或128。码片序列是正交的，能够同时传输。广泛用于3G网通信。  

### 调制技术
调制机制使用信号来传输比特，有两种方法：

- **基带传输：**信号的传输占据了传输介质从零到最大值之间的全部频率。这是有线传输介质普遍采用的一种方法，比如以太网。基带传输直接将数据比特转化为信号，比如用高电压表示1，用低电压表示0。实际上，出于工程考虑，很少采用这样简单的方式，需要更复杂的表示方法。这就是Line codes（线路编码）：发送 symbols（样本、符号），一个样本可传送1个或多个比特。几种线路编码如下：  
>不归零NRZ、不归零逆转NRZI、曼彻斯特编码、双极编码（交替标记逆转AMI）、4B/5B

- **通带传输：**通过调节信号的振幅、相位或频率来传输比特。它的特点是信号占据了以载波信号频率为中心的一段频带。一般情况下，我们在一个信道上发送信息所使用的频率范围并不是从零开始的，而是在某个频段上通过调节信号的<font color="red">振幅、相位或频率</font>来传输比特。这就是通带传输。  
- **1秒钟能够发送的码元的个数，叫做波特率，所以也叫码率。**
>比特率（位传输率、数据传输速率、数字带宽）与波特率的关系是：  
**C=B×log2n**其中 C：比特率； B：波特率；n：信号呈现的个数，为2的整数倍（有例外）。    

- **格子架编码调制（TCM）：**为了追求高的数字带宽，总是想办法提高信号级别，即星号星座图上的星点密密分布，但是，这导致出错率的上升。为了降低高速调制错误，在每个样本中采用一些额外的位用作纠错，剩下的位才用来传输数据，这种机制叫格子架编码调制。  
  
### 公共交换电话网络
**公共电话网络PSTN的任务是 传递人类的语音。而计算机网络的目标则是传输数据。**  
利用PSTN来传输数据，当然非常方便，可是，即使是使用ADSL，它的1M左右的带宽，跟100M、1000M甚至更高的即使是UTP的带宽之间的差别，也好像是双脚散步与飞机在空中游弋之间的差异一样巨大。即便这样，PSTN跟计算机网络紧密地联系在一起，它的低速传输不是因为内部中继线或交换机，而是最后一英里。PSTN 由全连通网、中心交换网到层次交换网，经过了由人工交换到全自动交换的演化变迁过程，形成了现代的PSTN。PSTN的主要构成：本地回路、干线、交换局。  

- **调制解调器：**用于将计算机产生的数字比特流转变为载波输出（模拟信号），在早期它被称作“猫”。

- 端局中codec的编码完成模拟信号到数字信号的转换。    

- **光纤到户(FTTH)：**本地回路（UTP）的物理特性限制了带宽的增长上限。而用户对带宽的需求非常巨大。将本地回路替换为光纤！这就是所谓的光纤到户FTTH（Fiber To The Home），光纤冲破了铜线带宽的限制，可以提供非常大的带宽；且无源光网带给用户更多的可靠和安全性能。这也是“光进铜退” 的最后一英里革命。  

- **PSTN的核心是脉码调制PCM，PSTN两种交换技术，一个是电路交换，另一个是包交换。电路交换带宽是提前分配，而包交换是按需分配；包交换容错能力更强；包交换不是按序送达，而电路交换是先发先到，接收方无需排序；电路交换按时间计费，包交换是按流量计费。**  

### 物理层设备
- 被动(无源)设备：插座、插头、电源、电缆
- 主动设备：收发器、中继器、集线器
- 冲突：当使用物理层设备时，更多的用户争抢共享资源，导致冲突。  
- 冲突域：数据包产生和冲突的网络区域，即指共享介质的区域。  
**物理层的设备都是傻瓜式设备，不具备过滤流量等智能功能。物理层设备的使用，增大了冲突域，降低了网络的性能。现在，已经很少再使用中继器和集线器这种低层傻瓜设备了。**

## 数据链路层
### 数据链路层概述
**数据链路层保证数据传输的有效、可靠。数据链路层主要负责差错检测和控制以及流量控制。**  

- 流量控制分为两类，一种基于速率，另一种基于反馈。  

数据链路层处理的协议数据单元PDU是数据帧，帧是由帧头、帧尾和载荷构成。其中载荷及上层网络层传下来的分组或者包。帧头主要存有物理地址信息，而帧尾则主要是校验和。  

- 成帧：将原始的位流分散到离散的帧中。大致分为四种：字符计数法、字节填充的标志字节法、比特填充的标志比特法、物理层编码违例法。

### 差错处理概述
差错分为两种：一种是单个错误，分散在各数据块中；另一种是突发错误，集中于一个数据块，整个块都是错误。  
差错处理一种是纠错，一种是检错：  

- 纠错码（前向纠错技术）：发现错误，从错误中恢复出正确的来。在有线网络中极少采用，主要用于无线网络。  
- 检错码：只能发现错误，不能从错误中恢复，但可采用重传恢复。局域网中主要采用检错码。  

接下来是对差错处理相关的一些概念：
>码字：包含数据位和校验位的n位单元（模式）。  
>海明距离：两个码字之间不同为的数目。
### 纠1位错的海明码
### 检错码
## 介质访问控制子层
###
## 网络层
###
## 传输层
###
## 套接字编程
### 
## 应用层